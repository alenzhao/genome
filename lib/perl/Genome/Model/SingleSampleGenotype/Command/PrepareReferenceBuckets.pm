package Genome::Model::SingleSampleGenotype::Command::PrepareReferenceBuckets;

use strict;
use warnings;

use Genome;

class Genome::Model::SingleSampleGenotype::Command::PrepareReferenceBuckets {
    is => 'Genome::Model::SingleSampleGenotype::Command::Base',
    doc => 'Prepare buckets for running the HaplotypeCaller in parallel',
};

sub _result_accessor {
    return 'output_result';
}

sub _command_class {
    return 'Genome::Model::ReferenceSequence::Command::CreateBuckets';
}

sub _params_for_command {
    my $self = shift;
    my $build = $self->build;

    my $result_users = Genome::SoftwareResult::User->user_hash_for_build($build);

    my @params = (
        reference_sequence_build => $build->reference_sequence_build,
        result_users => $result_users,
    );

    return @params;
}

sub sub_command_category {
    return 'analyst tools';
}

sub help_detail {
    return <<EOTEXT
This command is used if a SingleSampleGenotype (SSG) build
fails with an error like:

"ERROR: No buckets found for reference EXAMPLE (1234567890abcdef1234567890abcdef).
These can be generated by running `genome model single-sample-genotype
prepare-reference-buckets` on this build."

It accepts the failed SSG as an input and produces the necessary bucket information.
EOTEXT
}

sub help_brief {
    return 'Create bucket information needed to run the HaplotypeCaller.',
}

1;
